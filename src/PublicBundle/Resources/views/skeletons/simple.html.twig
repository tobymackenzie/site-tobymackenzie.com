{% extends '@TJMBase/skeletons/base.html.twig' %}

{% block docMeta %}
{{parent()}}
<link rel="shortcut icon" href="{{ asset('favicon.ico') }}" />
{% if canonical is not defined and doc.name != 'error' and (app.request.scheme != 'https' or app.request.host != 'www.tobymackenzie.com') %}
{%	set canonical = 'https://www.tobymackenzie.com' ~ app.request.server.get('REQUEST_URI') %}
{% endif %}
{% if canonical is defined %}
<link href="{{canonical}}" rel="canonical" />
{% endif %}
<link href="{{path('public_humans', {_format: 'txt'})}}" rel="author" />
<link href="{{path('public_app_manifest')}}" rel="manifest" />
{% endblock %}

{% block docStyles %}
<link href="{{asset('bundles/public/styles/' ~ app.environment ~ '/main.css')}}" rel="stylesheet" />
{% endblock %}

{% block docPreScripts %}
{#-#
script `type="application/javascript"` to block some old browsers.  blocks IE8- except IE5 mac, NN3 asks to download scripts (even without type)
- prevents needing to worry about supporting them with js features: have very low usage rates
- prevents Moz1 from throwing up 3 security exception dialogs
#}
{#--force https if browser supports it.  allows us to test for actual support, unlike server sent redirect. #}
{#-#
- putting in pre reduces rendering / loading of http content if redirect happens

- probably don't need both this and html box.  maybe remove box, show dialog, and use localStorage / cookie to not show next time.  Or use box as dialog, show as modal, closing sets cookie, won't show if cookie set.
#}
{% if page.secureUrl is defined %}
<script src="https://{{app.request.host}}/bundles/public/scripts/{{app.environment}}/forceHttps.js" type="application/javascript"></script>
{% endif %}
<script type="application/javascript"><!--//--><![CDATA[//><!--{{'\n'}}
{# detect js support #}
(function(H){H.className=H.className.replace(/\bua-no-js\b/,'ua-js')})(document.documentElement);
//--><!]]></script>
{#-- support styling html5 elements in IE8-. just use cdn since it's quick and easy, people using IE8- will be likely to have this cached, won't be affected by CSP, and probably don't care as much about privacy / security #}
<!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script><![endif]-->
{% endblock %}

{% block docPostScripts %}
<script{% if app.environment == 'dev' %} type="module"{% else %} async="async" defer="defer" type="application/javascript"{% endif %} src="/bundles/public/scripts/{{app.environment}}/post.js?a"></script>
{% endblock %}
