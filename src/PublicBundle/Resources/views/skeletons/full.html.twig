{% extends '@TJMBase/skeletons/base.html.twig' %}

{% block docTitleWrap %}
{{parent()}}
{% if doc.name != 'error' %}
<!--
._______.  _____  ._____   __     _.
|__   __| /  _  \ |   _  \ \ \  / /
   | |   |  | |  ||  |_| /   \ v /
   | |   |  | |  ||   _  \    | |
   | |   |  |_|  ||  |_|  \   | |
   |_|    \_____/ |______/    |_|
__     __    _      ______ ._.    __._______.._    ._. _______.._______.._______.
| \   / |  /   \   /  __  \| |   / /| ._____|| \   | ||_____  ||__   __|| ._____|
|  \ /  | /  ◊  \ | /    \|| | / /  | |_____.|  \  | |     / /    | |   | |_____.
| |\˘/| ||  / \  || |      |   <    | ._____|| |\ \| |   / /      | |   | ._____|
| | ˘ | || |   | || \___/¯|| | \ \  | |_____.| |  \  | / /____ .__| |__.| |_____.
|_|   |_||_|   |_| \_____/ |_|   \_\|_______||_|   \_||_______||_______||_______|
-->
{% endif %}
{% endblock %}

{% block docMeta %}
{{parent()}}
<link rel="shortcut icon" href="{{ asset('favicon.ico') }}" />
{% if canonical is not defined and doc.name != 'error' and (app.request.scheme != 'https' or app.request.host != 'www.tobymackenzie.com') %}
{%	set canonical = 'https://www.tobymackenzie.com' ~ app.request.server.get('REQUEST_URI') %}
{% endif %}
{% if canonical is defined %}
<link href="{{canonical}}" rel="canonical" />
{% endif %}
<link href="{{path('public_humans', {_format: 'txt'})}}" rel="author" />
<link href="{{path('public_app_manifest')}}" rel="manifest" />
{% endblock %}

{% block docStyles %}
<link href="{{asset('bundles/public/styles/' ~ app.environment ~ '/main.css')}}" rel="stylesheet" />
{% endblock %}

{% block docPreScripts %}
{#-#
script `type="application/javascript"` to block some old browsers.  blocks IE8- except IE5 mac, NN3 asks to download scripts (even without type)
- prevents needing to worry about supporting them with js features: have very low usage rates
- prevents Moz1 from throwing up 3 security exception dialogs
#}
{#--force https if browser supports it.  allows us to test for actual support, unlike server sent redirect. #}
{#-#
- putting in pre reduces rendering / loading of http content if redirect happens

- probably don't need both this and html box.  maybe remove box, show dialog, and use localStorage / cookie to not show next time.  Or use box as dialog, show as modal, closing sets cookie, won't show if cookie set.
#}
{% if page.secureUrl is defined %}
<script src="https://{{app.request.host}}/bundles/public/scripts/{{app.environment}}/forceHttps.js" type="application/javascript"></script>
{% endif %}
<script type="application/javascript"><!--//--><![CDATA[//><!--{{'\n'}}
{# detect js support #}
(function(H){H.className=H.className.replace(/\bua-no-js\b/,'ua-js')})(document.documentElement);
//--><!]]></script>
{#-- support styling html5 elements in IE8-. just use cdn since it's quick and easy, people using IE8- will be likely to have this cached, won't be affected by CSP, and probably don't care as much about privacy / security #}
<!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script><![endif]-->
{% endblock %}

{% block docPostScripts %}
<script{% if app.environment == 'dev' %} type="module"{% else %} async="async" defer="defer" type="application/javascript"{% endif %} src="/bundles/public/scripts/{{app.environment}}/post.js?a"></script>
{% endblock %}


{% block docBody %}
<a name="top"></a>
<div class="app">
	<nav class="appNav" aria-label="app">
		<ul class="appNavList">
			<li class="appNavItem"><a class="appMainAction appNavAction" href="#appMain" id="main-link"><span class="appNavItemText"><span class="appNavItemHash">#</span>Main content</span></a></li>
			<li class="appNavItem"><a class="appBottomAction appNavAction" href="#bottom" id="bottom-link"><span class="appNavItemText"><span class="appNavItemHash">#</span>Page bottom</span></a></li>
		</ul>
	</nav>
	<div class="appHeader">
		<header class="appHeaderContent" role="banner">
			{% if doc.name != 'home' %}<a class="appLogoAction" href="{{path('public_home')}}">{% endif %}
				<span class="appLogo">&lt;toby&gt;</span>
				<span class="appHeaderTagline"><span class="appHeaderTaglineWVP">Site of Toby </span>Mackenzie, web developer</span>
			{% if doc.name != 'home' %}</a>{% endif %}
		</header>
	</div>
	<div id="appMain" class="appMain"><main class="appMainContent" role="main">
		{% block docMain %}{% endblock %}
	</main></div>
	{% block docAside %}{% endblock %}
	{% if page.secureUrl is defined and doc.name != 'error' %}
	<div id="appFooter" class="appFooter">
		<footer class="appFooterContent" role="contentinfo">
			<p class="appSecureMessage">You are visiting this page over unencrypted HTTP.  It is also <a href="{{page.secureUrl}}">available over more secure HTTPS</a> (<a href="https://en.wikipedia.org/wiki/Https">more info on HTTPS</a>).</p>
		</footer>
	</div>
	{% endif %}
	<div class="appRestartNav"><a class="appRestartAction appNavAction" href="#top" id="top-link"><span class="appNavItemText"><span class="appNavItemHash">#</span>Page top</span></a></div>
</div>
<div id="bottom" class="appEndLogo">&lt;/toby&gt;</div>
<div class="appBG"></div>
{% endblock %}
